/**
 * angular-libphonenumber
 * Nathan Hammond's libphonenumber ported to an angular filter
 * @version v1.1.1
 * @link https://github.com/cwill747/angular-libphonenumber
 * @license Apache-2.0
 */
!function(t){t.module("cwill747.phonenumber",[]).directive("phoneNumber",["$log","$timeout","$window",function(t,e,n){function r(t){return t?t.replace(/([^0-9|+])/g,""):t}function o(e,r){var o=e;try{o=n.phoneUtils.formatAsTyped(e,r)}catch(e){t.debug(e)}return o}return{restrict:"A",require:"?ngModel",scope:{countryCode:"=",nonFormatted:"=?"},controllerAs:"",controller:function(){this.countryCode=this.countryCode||"us"},link:function(u,i,c,l){function a(t){var e=r(t);u.nonFormatted=e;var n="";return n=e&&e.length>1?o(e,u.countryCode):e,n.trim()}function s(t){return l.$isEmpty(t)?t:o(r(t),u.countryCode)}function h(t){if(l.$isEmpty(t))return u.nonFormatted="",t;var n=a(t);if(n===t)return t;var o=g.selectionStart,i=g.selectionEnd+n.length-t.length;return t.length<n.length&&(o+=n.length-t.length),t.length>n.length+1&&(o-=n.length-t.length),l.$setViewValue(n),l.$render(),e(function(){g.setSelectionRange(o,i)}),r(n)}function d(e){var r=!1;try{r=n.phoneUtils.isValidNumberForRegion(e,u.countryCode)}catch(e){t.debug(e)}var o=l.$isEmpty(e)||r;return l.$setValidity("phoneNumber",o),e}var g=i[0];u.$watch("countryCode",function(){l.$modelValue=l.$viewValue+" "}),l.$formatters.push(s),l.$formatters.push(d),l.$parsers.push(h),l.$parsers.push(d)}}}])}(angular);